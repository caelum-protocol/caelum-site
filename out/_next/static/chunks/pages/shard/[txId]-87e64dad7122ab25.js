(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7238],{19148:(e,t,a)=>{"use strict";a.d(t,{A:()=>h});var n=a(37876),s=a(31495);async function l(e){return console.log("\uD83E\uDDEC Minting to shard (stub):",e),{success:!0,txId:"fake_tx_id_1234",timestamp:new Date().toISOString()}}var i=a(23355),r=a(48230),o=a.n(r),c=a(33457),d=a(14232),x=a(97685),m=a(27212),u=a(98477);function p(e){let{url:t,onClose:a}=e,[s,l]=(0,d.useState)("Loading...");return((0,d.useEffect)(()=>{fetch(t).then(e=>e.json()).then(e=>l(JSON.stringify(e,null,2))).catch(()=>l("Failed to load JSON"))},[t]),"undefined"==typeof document)?null:(0,u.createPortal)((0,n.jsx)(m.N,{children:(0,n.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",onClick:a,children:(0,n.jsxs)(i.P.div,{initial:{scale:.8},animate:{scale:1},exit:{scale:.8},onClick:e=>e.stopPropagation(),className:"bg-gray-900 p-4 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-y-auto text-white",children:[(0,n.jsx)("pre",{className:"whitespace-pre-wrap text-xs",children:s}),(0,n.jsx)("div",{className:"text-center mt-4",children:(0,n.jsx)("button",{onClick:a,className:"px-4 py-1 bg-blue-600 rounded text-white",children:"Close"})})]})})}),document.body)}function h(e){var t;let{entry:a,onCopy:r,onDelete:m,copied:u,isNew:h,inShardView:f=!1}=e,{theme:y}=(0,c.D)(),[g,j]=(0,d.useState)(!1),w={matrix:"#00ff00",iris:"#a78bfa",pepe:"#ff53da",dark:"#ffffff"}[y]||"#ffffff";return(0,n.jsxs)(i.P.li,{initial:{y:20,opacity:0,boxShadow:"0px 0px 0px rgba(0,0,0,0)"},animate:{y:0,opacity:1,boxShadow:h?["0 0 0px ".concat(w),"0 0 12px ".concat(w),"0 0 0px ".concat(w)]:"0px 0px 0px rgba(0,0,0,0)"},exit:{y:-20,opacity:0},transition:{duration:h?2:.3},layout:!0,className:"relative rounded-lg p-4 border shadow transition-all theme-card",id:"mem-".concat(a.txId),children:[h&&(0,n.jsx)("span",{className:"absolute -top-1 -left-2 bg-yellow-500 text-black text-xs px-2 py-0.5 rounded",children:"You uploaded this!"}),(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{className:"font-medium break-all",children:[(t=a.type).startsWith("image/")?"\uD83D\uDDBC️":t.startsWith("video/")?"\uD83C\uDF9E️":"application/pdf"===t?"\uD83D\uDCC4":"application/json"===t?"\uD83D\uDD23":"\uD83D\uDCC1"," ",a.fileName]}),(0,n.jsxs)("p",{className:"text-sm opacity-80",children:[(0,s.A)(parseInt(a.size))," — ",a.type]}),a.note&&(0,n.jsx)("p",{className:"text-sm italic mt-1 break-words",children:a.note}),(0,n.jsx)("p",{className:"text-xs opacity-50 mt-1",children:new Date(a.uploadedAt).toLocaleString()})]}),!f&&m&&(0,n.jsx)("button",{onClick:()=>m(a.txId),className:"text-red-500 text-xs hover:underline ml-4 flex-shrink-0",children:"Delete"})]}),(0,n.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:["application/json"===a.type?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>j(!0),className:"text-blue-400 text-sm hover:underline",children:"Preview"}),(0,n.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 text-sm hover:underline",children:"View Raw"})]}):(0,n.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-400 text-sm hover:underline",children:"View Memory"}),!f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>r(a.url,a.txId),className:"text-yellow-400 text-sm hover:underline",children:u?"Copied!":"Copy Link"}),(0,n.jsx)("button",{disabled:h,onClick:async()=>{!h&&(await l(a)).success&&x.Ay.success("✅ Minted successfully!")},className:"text-purple-400 text-sm hover:underline ".concat(h?"opacity-50 cursor-not-allowed":""),children:"Mint to Shard(soon)"}),a.txId&&(0,n.jsx)(o(),{href:"/shard/".concat(a.txId),className:"text-purple-300 text-sm hover:underline",children:"View Shard"})]}),g&&(0,n.jsx)(p,{url:a.url,onClose:()=>j(!1)})]})]})}},31495:(e,t,a)=>{"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";let a=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,a)).toFixed(t<0?0:t))," ").concat(["Bytes","KB","MB","GB","TB"][a])}a.d(t,{A:()=>n})},41472:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/shard/[txId]",function(){return a(43837)}])},43837:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>b});var n=a(37876),s=a(14232),l=a(14e3),i=a(77328),r=a.n(i),o=a(59865),c=a(19148),d=a(31495),x=a(27524),m=a.n(x),u=a(49473),p=a(97685),h=a(48230),f=a.n(h),y=a(27212),g=a(23355),j=a(78254),w=a(33457);function b(){let{theme:e}=(0,w.D)(),t=(0,j.A)(),{archive:a}=(0,o.P)(),{txId:i}=(0,l.useParams)(),[x,h]=(0,s.useState)(null),[b,N]=(0,s.useState)(0);if((0,s.useEffect)(()=>{if(t&&i&&a.length>0){let e=a.filter(e=>e.txId===i);h(e),N(e.reduce((e,t)=>e+parseInt(t.size),0))}},[i,a,t]),!t||!i||null===x)return null;let v=async()=>{let e=new(m());for(let t of x)try{let a=await fetch(t.url),n=await a.blob();e.file(t.fileName,n)}catch(e){console.error("Failed to fetch file",t.fileName,e)}let t=x.map(e=>{let{fileName:t,txId:a,type:n,size:s,uploadedAt:l}=e;return{fileName:t,txId:a,type:n,size:s,uploadedAt:l}});e.file("metadata.json",JSON.stringify(t,null,2));let a=await e.generateAsync({type:"blob"});(0,u.saveAs)(a,"shard-".concat(i,".zip")),p.Ay.success("\uD83D\uDCBE Downloaded shard!")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r(),{children:[(0,n.jsx)("title",{children:"Shard ".concat(i," – Caelum Protocol")}),(0,n.jsx)("meta",{name:"description",content:"View files stored in this Caelum Protocol shard."}),(0,n.jsx)("meta",{property:"og:type",content:"article"}),(0,n.jsx)("meta",{property:"og:title",content:"Shard ".concat(i," – Caelum Protocol")}),(0,n.jsx)("meta",{property:"og:description",content:"View files stored in this Caelum Protocol shard."}),(0,n.jsx)("meta",{property:"og:image",content:"https://caelumprotocol.org/og-v2.png"}),(0,n.jsx)("meta",{property:"og:url",content:"https://caelumprotocol.org/shard/".concat(i)}),(0,n.jsx)("meta",{property:"og:site_name",content:"Caelum Protocol"}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{name:"twitter:title",content:"Shard ".concat(i," – Caelum Protocol")}),(0,n.jsx)("meta",{name:"twitter:description",content:"View files stored in this Caelum Protocol shard."}),(0,n.jsx)("meta",{name:"twitter:image",content:"https://caelumprotocol.org/og-v2.png"}),(0,n.jsx)("meta",{name:"twitter:site",content:"@CaelumProtocol"}),(0,n.jsx)("link",{rel:"icon",href:"/caelum-favicon.ico"})]}),(0,n.jsxs)("main",{className:"".concat(e," relative z-30 min-h-screen flex flex-col items-center justify-start px-2 sm:px-4 py-16 sm:py-24 text-center transition-colors duration-300"),children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("h2",{className:"text-3xl font-bold text-white mb-2",children:["\uD83D\uDCE6 Shard: ",(0,n.jsx)("span",{className:"text-purple-300",children:i})]}),x.length>0&&(0,n.jsxs)("p",{className:"text-gray-400 text-sm",children:["\uD83E\uDDEC ",x.length," file",x.length>1?"s":""," •"," ",(0,d.A)(b)," • Minted"," ",new Date(x[0].uploadedAt).toLocaleString()]})]}),x.length>0&&(0,n.jsx)("button",{onClick:v,className:"text-white bg-green-600 px-6 py-2 rounded-md text-sm hover:bg-green-700 transition mb-8",children:"⬇ Download Shard (.zip)"}),0===x.length?(0,n.jsx)("p",{className:"text-red-400 text-lg mb-12",children:"No memories found for this shard."}):(0,n.jsx)("ul",{className:"w-full max-w-3xl flex flex-col items-center justify-center gap-6 mt-6",children:(0,n.jsx)(y.N,{initial:!1,children:x.map(e=>(0,n.jsx)(g.P.li,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.3},className:"w-full",children:(0,n.jsx)(c.A,{entry:e,copied:!1,onCopy:()=>{},inShardView:!0})},e.txId+e.fileName))})}),(0,n.jsx)(f(),{href:"/#uploader",className:"mt-16 inline-block bg-blue-700 hover:bg-blue-800 text-white px-8 py-3 rounded-full text-base shadow-lg transition font-semibold",children:"⬅ Back to Archive"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[5695,3355,2877,636,6593,8792],()=>t(41472)),_N_E=e.O()}]);